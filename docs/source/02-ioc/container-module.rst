.. index:: IContainerModule

Модуль IoC-контейнера
=====================

Перед запуском приложения InfinniPlatform осуществляет поиск модулей IoC-контейнера. При этом происходит
сканирование всех сборок (*.dll) текущего каталога приложения и выбираются все классы, реализующие интерфейс
``InfinniPlatform.Sdk.IoC.IContainerModule``. Эти классы должны быть публичными и иметь конструктор без параметров.
После этого происходит автоматическое создание модулей и вызов метода загрузки ``Load()``.


.. index:: IContainerModule.Load()

Загрузка модуля IoC-контейнера
------------------------------

Метод ``Load()`` предназначен для регистрации компонентов приложения и не может содержать какой-либо иной логики,
поскольку в этот момент приложение находится в несогласованном состоянии. Для регистрации компонентов в метод
``Load()`` передается интерфейс ``InfinniPlatform.Sdk.IoC.IContainerBuilder``.

.. note:: Если есть необходимость в выполнении какой-либо логики сразу после запуска приложения, следует использовать
          механизм, описанный в разделе :doc:`/03-hosting/index`.

Ниже приведена общая структура модуля IoC-контейнера.

.. code-block:: csharp

    public class ContainerModule : InfinniPlatform.Sdk.IoC.IContainerModule
    {
        public void Load(InfinniPlatform.Sdk.IoC.IContainerBuilder builder)
        {
            // Регистрация компонентов...
        }
    }
